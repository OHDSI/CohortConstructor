<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create measurement-based cohorts — measurementCohort • CohortConstructor</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create measurement-based cohorts — measurementCohort"><meta name="description" content="measurementCohort() creates cohorts based on patient records from the
measurement or observation tables. It extends the function conceptCohort()
by allowing users to specify measurement values associated with those records.
This function supports both concept-based and value-based filtering:
Either valueAsConcept or valueAsNumber must be provided.
If one of them is specified (not NULL), only records that satisfy the other
filter will be included.
If both are provided, records that meet either filter will be included.

"><meta property="og:description" content="measurementCohort() creates cohorts based on patient records from the
measurement or observation tables. It extends the function conceptCohort()
by allowing users to specify measurement values associated with those records.
This function supports both concept-based and value-based filtering:
Either valueAsConcept or valueAsNumber must be provided.
If one of them is specified (not NULL), only records that satisfy the other
filter will be included.
If both are provided, records that meet either filter will be included.

"><meta property="og:image" content="https://ohdsi.github.io/CohortConstructor/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">CohortConstructor</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/a00_introduction.html">Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/a01_building_base_cohorts.html">Building base cohorts</a></li>
    <li><a class="dropdown-item" href="../articles/a02_cohort_table_requirements.html">Applying cohort table requirements</a></li>
    <li><a class="dropdown-item" href="../articles/a03_require_demographics.html">Applying demographic requirements to a cohort</a></li>
    <li><a class="dropdown-item" href="../articles/a04_require_intersections.html">Applying requirements related to other cohorts, concept sets, or tables</a></li>
    <li><a class="dropdown-item" href="../articles/a05_update_cohort_start_end.html">Updating cohort start and end dates</a></li>
    <li><a class="dropdown-item" href="../articles/a06_concatanate_cohorts.html">Concatenating cohort records</a></li>
    <li><a class="dropdown-item" href="../articles/a07_filter_cohorts.html">Filtering cohorts</a></li>
    <li><a class="dropdown-item" href="../articles/a08_split_cohorts.html">Splitting cohorts</a></li>
    <li><a class="dropdown-item" href="../articles/a09_combine_cohorts.html">Combining Cohorts</a></li>
    <li><a class="dropdown-item" href="../articles/a10_match_cohorts.html">Generating a matched cohort</a></li>
    <li><a class="dropdown-item" href="../articles/a11_benchmark.html">CohortConstructor benchmarking results</a></li>
    <li><a class="dropdown-item" href="../articles/a12_behind_the_scenes.html">Behind the scenes</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/OHDSI/CohortConstructor/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create measurement-based cohorts</h1>
      <small class="dont-index">Source: <a href="https://github.com/OHDSI/CohortConstructor/blob/main/R/measurementCohort.R" class="external-link"><code>R/measurementCohort.R</code></a></small>
      <div class="d-none name"><code>measurementCohort.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>measurementCohort()</code> creates cohorts based on patient records from the
measurement or observation tables. It extends the function <code><a href="conceptCohort.html">conceptCohort()</a></code>
by allowing users to specify measurement values associated with those records.</p>
<p>This function supports both concept-based and value-based filtering:</p><ul><li><p>Either <code>valueAsConcept</code> or <code>valueAsNumber</code> must be provided.</p></li>
<li><p>If one of them is specified (not NULL), only records that satisfy the other
filter will be included.</p></li>
<li><p>If both are provided, records that meet <em>either</em> filter will be included.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">measurementCohort</span><span class="op">(</span></span>
<span>  <span class="va">cdm</span>,</span>
<span>  <span class="va">conceptSet</span>,</span>
<span>  <span class="va">name</span>,</span>
<span>  valueAsConcept <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  valueAsNumber <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  table <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  useRecordsBeforeObservation <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  useSourceFields <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  subsetCohort <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subsetCohortId <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-cdm">cdm<a class="anchor" aria-label="anchor" href="#arg-cdm"></a></dt>
<dd><p>A cdm reference.</p></dd>


<dt id="arg-conceptset">conceptSet<a class="anchor" aria-label="anchor" href="#arg-conceptset"></a></dt>
<dd><p>A conceptSet, which can either be a codelist
or a conceptSetExpression.</p></dd>


<dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>Name of the new cohort table created in the cdm object.</p></dd>


<dt id="arg-valueasconcept">valueAsConcept<a class="anchor" aria-label="anchor" href="#arg-valueasconcept"></a></dt>
<dd><p>A named list defining cohorts based on measurement
values as concept IDs. Each element name defines the name of cohort to
create, and its value is a vector of concept IDs used to filter measurements
by <code>value_as_concept_id.</code>
If NULL, all records will be included regardless of <code>value_as_concept_id.</code></p>
<p>For instance, to create two bmi cohorts from a bmi <code>conceptSet</code> we can do the
following:
<code>valueAsConcept = list(high_bmi = c(4328749, 35819253), low_bmi = c(4267416, 45881666))</code></p>
<p>See more examples in the function examples.</p></dd>


<dt id="arg-valueasnumber">valueAsNumber<a class="anchor" aria-label="anchor" href="#arg-valueasnumber"></a></dt>
<dd><p>A named list defining cohorts based on numeric
measurement ranges.
Each list element should contain one or more numeric vectors of length two,
specifying the allowed range(s) for the measurement value.
If the numeric vector is named, the name should correspond to the
<code>unit_concept_id</code> that will be used for that range.</p>
<p>For example, the following creates a cohort named "low_weight" based on
measurements recorded in kilograms (unit_concept_id = 9529) and stones
(unit_concept_id = 21498905):
<code>valueAsNumber = list("low_weight" = list("9529" = c(30, 40), "21498905" = c(4.7, 6.3))) </code></p>
<p>See the examples below for how to define multiple cohorts based on different measurement filters.</p></dd>


<dt id="arg-table">table<a class="anchor" aria-label="anchor" href="#arg-table"></a></dt>
<dd><p>Character vector specifying which OMOP tables to use.
Accepts "measurement", "observation", or both.</p></dd>


<dt id="arg-userecordsbeforeobservation">useRecordsBeforeObservation<a class="anchor" aria-label="anchor" href="#arg-userecordsbeforeobservation"></a></dt>
<dd><p>If FALSE, only records in observation will
be used. If TRUE, records before the start of observation period will be
considered, with cohort start date set as the start date of the
individuals next observation period (as cohort records must be within
observation).</p></dd>


<dt id="arg-usesourcefields">useSourceFields<a class="anchor" aria-label="anchor" href="#arg-usesourcefields"></a></dt>
<dd><p>If TRUE, the source concept_id fields will also be
used when identifying relevant clinical records. If FALSE, only the standard
concept_id fields will be used.</p></dd>


<dt id="arg-subsetcohort">subsetCohort<a class="anchor" aria-label="anchor" href="#arg-subsetcohort"></a></dt>
<dd><p>A character refering to a cohort table containing
individuals for whom cohorts will be generated. Only individuals in this
table will appear in the generated cohort.</p></dd>


<dt id="arg-subsetcohortid">subsetCohortId<a class="anchor" aria-label="anchor" href="#arg-subsetcohortid"></a></dt>
<dd><p>Optional. Specifies cohort IDs from the <code>subsetCohort</code>
table to include. If none are provided, all cohorts from the <code>subsetCohort</code>
are included.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A cohort table.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ohdsi.github.io/CohortConstructor/">CohortConstructor</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ohdsi.github.io/omock/" class="external-link">omock</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ohdsi.github.io/omock/reference/mockVocabularyTables.html" class="external-link">mockVocabularyTables</a></span><span class="op">(</span>concept <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  concept_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4326744</span>, <span class="fl">4298393</span>, <span class="fl">45770407</span>, <span class="fl">8876</span>, <span class="fl">4124457</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  concept_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Blood pressure"</span>, <span class="st">"Systemic blood pressure"</span>,</span></span>
<span class="r-in"><span>                   <span class="st">"Baseline blood pressure"</span>, <span class="st">"millimeter mercury column"</span>,</span></span>
<span class="r-in"><span>                   <span class="st">"Normal range"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  domain_id <span class="op">=</span> <span class="st">"Measurement"</span>,</span></span>
<span class="r-in"><span>  vocabulary_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SNOMED"</span>, <span class="st">"SNOMED"</span>, <span class="st">"SNOMED"</span>, <span class="st">"UCUM"</span>, <span class="st">"SNOMED"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  standard_concept <span class="op">=</span> <span class="st">"S"</span>,</span></span>
<span class="r-in"><span>  concept_class_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Observable Entity"</span>, <span class="st">"Observable Entity"</span>,</span></span>
<span class="r-in"><span>                       <span class="st">"Observable Entity"</span>, <span class="st">"Unit"</span>, <span class="st">"Qualifier Value"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  concept_code <span class="op">=</span> <span class="cn">NA_character_</span>,</span></span>
<span class="r-in"><span>  valid_start_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="cn">NA_character_</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  valid_end_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="cn">NA_character_</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  invalid_reason <span class="op">=</span> <span class="cn">NA_character_</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ohdsi.github.io/omock/reference/mockCdmFromTables.html" class="external-link">mockCdmFromTables</a></span><span class="op">(</span>tables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    measurement <span class="op">=</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      measurement_id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4L</span>,</span></span>
<span class="r-in"><span>      person_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">1L</span>, <span class="fl">2L</span>, <span class="fl">3L</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      measurement_concept_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4326744L</span>, <span class="fl">4298393L</span>, <span class="fl">4298393L</span>, <span class="fl">45770407L</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      measurement_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2000-07-01"</span>, <span class="st">"2000-12-11"</span>, <span class="st">"2002-09-08"</span>, <span class="st">"2015-02-19"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      measurement_type_concept_id <span class="op">=</span> <span class="fl">0L</span>,</span></span>
<span class="r-in"><span>      value_as_number <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">125</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      value_as_concept_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0L</span>, <span class="fl">0L</span>, <span class="fl">0L</span>, <span class="fl">4124457L</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>      unit_concept_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8876L</span>, <span class="fl">8876L</span>, <span class="fl">0L</span>, <span class="fl">0L</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="op">)</span></span></span>
<span class="r-in"><span> <span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create one cohort of blood pressure measurements indicating normal levels</span></span></span>
<span class="r-in"><span><span class="va">cdm</span><span class="op">$</span><span class="va">cohort</span> <span class="op">&lt;-</span> <span class="fu">measurementCohort</span><span class="op">(</span></span></span>
<span class="r-in"><span>  cdm <span class="op">=</span> <span class="va">cdm</span>,</span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="st">"cohort"</span>,</span></span>
<span class="r-in"><span>  conceptSet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"blood_pressure"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4326744</span>, <span class="fl">4298393</span>, <span class="fl">45770407</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  valueAsConcept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"normal_blood_preassure"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4124457</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  valueAsNumber <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"normal_blood_preassure"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"8876"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">70</span>, <span class="fl">120</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  useRecordsBeforeObservation <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span><span style="color: #BBBB00;">!</span> `codelist` casted to integers.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Subsetting table <span style="font-weight: bold;">measurement</span> using 3 concepts with domain: <span style="font-weight: bold;">measurement</span>.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Combining tables.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Applying measurement requirements.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Getting records in observation.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Creating cohort attributes.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Cohort <span style="font-weight: bold;">cohort</span> created.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cdm</span><span class="op">$</span><span class="va">cohort</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   cohort_definition_id subject_id cohort_start_date cohort_end_date</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>                    1          1 2000-07-01        2000-07-01     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>                    1          3 2015-02-19        2015-02-19     </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># create two cohorts of blood preassure measurements, one with results</span></span></span>
<span class="r-in"><span><span class="co"># indicating normal blood pressure and the other inidcating high</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cdm</span><span class="op">$</span><span class="va">cohort2</span> <span class="op">&lt;-</span> <span class="fu">measurementCohort</span><span class="op">(</span></span></span>
<span class="r-in"><span>  cdm <span class="op">=</span> <span class="va">cdm</span>,</span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="st">"cohort2"</span>,</span></span>
<span class="r-in"><span>  conceptSet <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"blood_pressure"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4326744</span>, <span class="fl">4298393</span>, <span class="fl">45770407</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  valueAsConcept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"normal_blood_pressure"</span> <span class="op">=</span> <span class="fl">4124457</span>,</span></span>
<span class="r-in"><span>    <span class="st">"high_blood_pressure"</span> <span class="op">=</span> <span class="fl">4328749</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  valueAsNumber <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"normal_blood_pressure"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"8876"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">70</span>, <span class="fl">120</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="st">"high_blood_pressure"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"8876"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">121</span>, <span class="fl">200</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  useRecordsBeforeObservation <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span><span style="color: #BBBB00;">!</span> `codelist` casted to integers.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Subsetting table <span style="font-weight: bold;">measurement</span> using 3 concepts with domain: <span style="font-weight: bold;">measurement</span>.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Combining tables.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Applying measurement requirements.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Getting records in observation.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>There were 3 warnings in `dplyr::mutate()`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> The first warning was:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In argument: `trim_record = &amp;...`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> In group 1: `cohort_definition_id = 1`, `subject_id = 1`, `cohort_start_date</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   = 2000-12-11`, `cohort_end_date = 2000-12-11`.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> Caused by warning in `min()`:</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #BBBB00;">!</span> no non-missing arguments to min; returning Inf</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Run `dplyr::last_dplyr_warnings()` to see the 2 remaining warnings.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Creating cohort attributes.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BB00;">✔</span> Cohort <span style="font-weight: bold;">cohort2</span> created.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cdm</span><span class="op">$</span><span class="va">cohort2</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://darwin-eu.github.io/omopgenerics/reference/settings.html" class="external-link">settings</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 4</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   cohort_definition_id cohort_name           cdm_version vocabulary_version</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span>                    1 high_blood_pressure   5.3         mock              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span>                    2 normal_blood_pressure 5.3         mock              </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Edward Burn, Martí Català, Nuria Mercade-Besora, Marta Alcalde-Herraiz, Mike Du, Yuchen Guo, Xihang Chen, Kim Lopez-Guell, Elin Rowlands.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

